% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/solar_potential.R
\name{calculate_solar_potential}
\alias{calculate_solar_potential}
\alias{calculate_solar_potential.LAS}
\alias{calculate_solar_potential.LAScatalog}
\title{Calculate Solar Potential for LiDAR Point Cloud}
\usage{
calculate_solar_potential(las, ...)

\method{calculate_solar_potential}{LAS}(
  las,
  year = 2025,
  day_start = NULL,
  day_end = NULL,
  start_date = NULL,
  end_date = NULL,
  day_step = 30,
  minute_step = 30,
  min_sun_angle = 5,
  voxel_size = 1,
  lat = NULL,
  lon = NULL,
  timezone = NULL,
  n_threads = NULL,
  clear_cache = FALSE,
  ...
)

\method{calculate_solar_potential}{LAScatalog}(
  las,
  year = 2025,
  day_start = 1,
  day_end = 365,
  day_step = 30,
  minute_step = 30,
  min_sun_angle = 5,
  voxel_size = 1,
  lat,
  lon,
  timezone,
  ...
)
}
\arguments{
\item{las}{LAS or LAScatalog object from lidR package containing point cloud data}

\item{...}{Additional arguments passed to other methods}

\item{year}{Numeric. Year for solar calculation (default: 2025)}

\item{day_start}{Numeric. Start day of year (1-365). Ignored if start_date is provided.}

\item{day_end}{Numeric. End day of year (1-365). Ignored if end_date is provided.}

\item{start_date}{Date or character. Start date (e.g., "2025-06-01"). Overrides day_start.}

\item{end_date}{Date or character. End date (e.g., "2025-08-31"). Overrides day_end.}

\item{day_step}{Numeric. Step size in days for calculation (default: 30)}

\item{minute_step}{Numeric. Time step in minutes for calculation within each day (default: 30)}

\item{min_sun_angle}{Numeric. Minimum sun angle in degrees for calculation (default: 5)}

\item{voxel_size}{Numeric. Size of voxels for octree shadow calculation (default: 1)}

\item{lat}{Numeric. Latitude of the study area (auto-detected from CRS if NULL)}

\item{lon}{Numeric. Longitude of the study area (auto-detected from CRS if NULL)}

\item{timezone}{Numeric. Time zone offset from UTC (auto-detected from CRS if NULL)}

\item{n_threads}{Numeric. Number of OpenMP threads to use (default: auto-detect)}

\item{clear_cache}{Logical. Clear performance caches before calculation (default: FALSE)}
}
\value{
LAS object with added column for solar potential in Wh/m^2/day
}
\description{
This function takes a LiDAR point cloud from the lidR package and calculates
the solar potential for each point, taking into account shadowing effects from
surrounding points. Location information (lat/lon/timezone) is auto-detected 
from the CRS when possible.
}
\examples{
\dontrun{
library(lidR)
library(vostokR)
library(terra)

# Single LAS file example using included test data
LASfile <- system.file("extdata", "test.laz", package="vostokR")
las <- readLAS(LASfile)

# Calculate normals if not present
las <- add_normals(las, k = 10)

# Example 1: Auto-detect location from CRS
las_solar <- calculate_solar_potential(las, 
                                     year = 2025,
                                     start_date = "2025-06-01",
                                     end_date = "2025-08-31")

# Example 2: Manual location specification with threading control
las_solar <- calculate_solar_potential(las, 
                                     year = 2025,
                                     day_start = 150,
                                     day_end = 250,
                                     lat = 33.4484,
                                     lon = -112.0740,
                                     timezone = -7,
                                     n_threads = 4)

# Plot solar potential on point cloud
plot(las_solar, color = "solar_potential", pal = heat.colors(100))

# Create ground raster and plot
ground_raster <- solar_ground_raster(las_solar, res = 1)
plot(ground_raster, main = "Ground Solar Potential")
}
}
